# ==================================================================
# Forge Factory - Environment Variables
# ==================================================================
# Copy this file to .env and fill in the values
# Never commit .env to version control

# --------------------------------------------------------------
# Database
# --------------------------------------------------------------
# PgBouncer connection (for application)
DATABASE_URL="postgresql://user:password@localhost:6432/forge?pgbouncer=true"
# Direct connection (for migrations)
DATABASE_DIRECT_URL="postgresql://user:password@localhost:5432/forge"

# Read replica (optional)
DATABASE_READ_URL="postgresql://user:password@localhost:5433/forge"

# Connection pool settings
DB_POOL_MIN=5
DB_POOL_MAX=100
DB_POOL_IDLE_TIMEOUT=600

# --------------------------------------------------------------
# Redis
# --------------------------------------------------------------
REDIS_URL="redis://localhost:6379"
REDIS_PASSWORD=""
REDIS_TLS_ENABLED=false

# --------------------------------------------------------------
# Authentication (Auth0)
# --------------------------------------------------------------
AUTH0_DOMAIN="your-tenant.auth0.com"
AUTH0_CLIENT_ID="your-client-id"
AUTH0_CLIENT_SECRET="your-client-secret"
AUTH0_AUDIENCE="https://api.forge.io"
JWT_SECRET="your-jwt-secret-min-32-chars"

# --------------------------------------------------------------
# OAuth Server
# --------------------------------------------------------------
OAUTH_ISSUER="https://api.forge.io"
OAUTH_PRIVATE_KEY_PATH="./secrets/oauth-private-key.pem"

# --------------------------------------------------------------
# Billing (Stripe)
# --------------------------------------------------------------
STRIPE_SECRET_KEY="sk_test_..."
STRIPE_PUBLISHABLE_KEY="pk_test_..."
STRIPE_WEBHOOK_SECRET="whsec_..."

# --------------------------------------------------------------
# Email
# --------------------------------------------------------------
# Provider: sendgrid | ses | resend
EMAIL_PROVIDER="sendgrid"
SENDGRID_API_KEY=""
AWS_SES_REGION="us-east-1"
AWS_SES_ACCESS_KEY_ID=""
AWS_SES_SECRET_ACCESS_KEY=""
RESEND_API_KEY=""

EMAIL_FROM="noreply@forge.io"
EMAIL_FROM_NAME="Forge"

# --------------------------------------------------------------
# SMS (Twilio)
# --------------------------------------------------------------
TWILIO_ACCOUNT_SID=""
TWILIO_AUTH_TOKEN=""
TWILIO_PHONE_NUMBER=""

# --------------------------------------------------------------
# File Storage (S3-compatible)
# --------------------------------------------------------------
# Provider: s3 | r2 | minio
STORAGE_PROVIDER="s3"
STORAGE_BUCKET="forge-uploads"
STORAGE_REGION="us-east-1"
STORAGE_ACCESS_KEY_ID=""
STORAGE_SECRET_ACCESS_KEY=""
STORAGE_ENDPOINT="" # For R2/MinIO

# Cloudflare R2
R2_ACCOUNT_ID=""
R2_ACCESS_KEY_ID=""
R2_SECRET_ACCESS_KEY=""

# --------------------------------------------------------------
# Search
# --------------------------------------------------------------
# Provider: postgres | typesense | algolia
SEARCH_PROVIDER="postgres"

# Typesense
TYPESENSE_HOST=""
TYPESENSE_PORT=443
TYPESENSE_PROTOCOL="https"
TYPESENSE_API_KEY=""

# Algolia
ALGOLIA_APP_ID=""
ALGOLIA_API_KEY=""

# --------------------------------------------------------------
# Feature Flags (Unleash)
# --------------------------------------------------------------
UNLEASH_URL="https://unleash.forge.io"
UNLEASH_API_KEY=""
UNLEASH_INSTANCE_ID=""

# --------------------------------------------------------------
# Observability
# --------------------------------------------------------------
# Sentry
SENTRY_DSN=""
SENTRY_ORG=""
SENTRY_PROJECT=""
SENTRY_AUTH_TOKEN=""

# OpenTelemetry
OTEL_EXPORTER_OTLP_ENDPOINT="http://localhost:4318"
OTEL_SERVICE_NAME="forge-api"

# DataDog (optional)
DD_API_KEY=""
DD_APP_KEY=""
DD_SITE="datadoghq.com"

# PagerDuty
PAGERDUTY_ROUTING_KEY=""

# --------------------------------------------------------------
# Analytics (PostHog)
# --------------------------------------------------------------
POSTHOG_API_KEY=""
POSTHOG_HOST="https://app.posthog.com"

# --------------------------------------------------------------
# Slack Integration
# --------------------------------------------------------------
SLACK_BOT_TOKEN=""
SLACK_SIGNING_SECRET=""
SLACK_DEFAULT_WEBHOOK_URL=""

# --------------------------------------------------------------
# Microsoft Teams Integration
# --------------------------------------------------------------
TEAMS_WEBHOOK_URL=""

# --------------------------------------------------------------
# Push Notifications (VAPID)
# --------------------------------------------------------------
VAPID_PUBLIC_KEY=""
VAPID_PRIVATE_KEY=""
VAPID_SUBJECT="mailto:admin@forge.io"

# --------------------------------------------------------------
# Multi-Region
# --------------------------------------------------------------
# Current region
AWS_REGION="us-east-1"
FORGE_REGION="us-east-1"

# All regions (comma-separated)
FORGE_REGIONS="us-east-1,eu-west-1,ap-southeast-1"

# --------------------------------------------------------------
# Security
# --------------------------------------------------------------
# Encryption key for sensitive data (32+ chars)
ENCRYPTION_KEY="your-encryption-key-min-32-chars"

# Rate limiting
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# Session
SESSION_SECRET="your-session-secret-min-32-chars"
SESSION_MAX_AGE=86400000

# --------------------------------------------------------------
# Application
# --------------------------------------------------------------
NODE_ENV="development"
PORT=3000
API_URL="http://localhost:3000"
PORTAL_URL="http://localhost:3001"
ADMIN_URL="http://localhost:3002"

# --------------------------------------------------------------
# CI/CD
# --------------------------------------------------------------
CI=false
SKIP_PREFLIGHT_CHECK=true

# --------------------------------------------------------------
# Development
# --------------------------------------------------------------
LOG_LEVEL="debug"
ENABLE_DEBUG_ROUTES=true
